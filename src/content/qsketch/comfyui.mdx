---
title: "카테고리 롤업 & 카운트 자동화 인스트럭션"
date: "2025-03-04"
category: "qsketch"
published: false
---

# dtslib1979/eae.kr – 카테고리 롤업 & 카운트 자동화 인스트럭션

이 텍스트는 **GitHub Copilot SWE Agent**(또는 다른 에이전트)에게 그대로 붙여넣어서 실행시키기 위한 작업 지시서다.

## 0. 리포지토리 정보

* GitHub repo: `dtslib1979/eae.kr`
* 기술스택: React + Vite + MDX + Tailwind + GitHub Pages
* MDX 콘텐츠 루트: `src/content/`
* 새 카테고리 폴더: `src/content/eae-blueprint/`

## 1. 현재 문제 요약

1. 홈(`/`) 화면에서 **EAE Blueprint 카테고리 카드**가 보이고, 카운트 뱃지도 `3`으로 표시되지만,
2. `/category/eae-blueprint` 페이지에 들어가면 **카드가 비어 있는 상태의 스켈레톤 프레임만 나온다.**
3. 카테고리별 포스트 **개수 카운트가 하드코딩** 되어 있어서, MDX 파일을 새로 추가해도 자동으로 숫자가 변하지 않을 가능성이 높다.

즉,

* MDX → 포스트 메타데이터 추출
* 카테고리별 그룹핑 & 카운트
* 라우팅(`/category/:slug`)에서 실제 리스트 렌더링

이 부분이 **하드코딩/불완전**하게 구현되어 있는 상태로 보인다.

## 2. 내가 원하는 최종 동작

1. `src/content/**` 아래 있는 모든 `.mdx` 파일은, **앞머리(frontmatter)의 `category` 또는 폴더명**을 기준으로 자동으로 카테고리에 포함된다.
2. `/` 홈 페이지의 카테고리 카드들은 **실제 MDX 파일 개수를 기반으로 카운트 뱃지**를 표시한다. (하드코딩된 숫자 제거)
3. `/category/:slug` 페이지는 해당 slug에 대응하는 **카테고리의 모든 포스트 카드 리스트**를 보여줘야 한다.

   * 예: `/category/eae-blueprint` → `src/content/eae-blueprint/` 또는 `category: "eae-blueprint"` MDX 전부 목록으로 카드 표시
4. Archive 페이지(`/archive`)도 같은 데이터 소스를 활용해서, **카테고리별로 그룹핑된 전체 포스트 리스트**를 보여준다.

## 3. 작업 요청 상세

### 3-1. `src/utils/posts.js` 점검 및 수정

1. `getAllPosts`, `getPostsByCategory`, `getCategoryCounts` 등

   * 현재 구현을 분석해서, **새 카테고리(`eae-blueprint`)도 자동으로 포함되는지** 확인.
2. 만약 카테고리 목록이나 카운트가 **하드코딩** 되어 있다면, 아래 방식으로 수정:

   * `src/content/**/**.mdx` 를 glob/import 해서 모든 포스트 메타데이터를 모은 뒤,
   * frontmatter의 `category` 필드를 기준으로 그룹핑하여
   * 카테고리별 포스트 개수를 동적으로 계산하는 구조로 변경.
3. 폴더 구조와 frontmatter 중 어느 쪽을 기준으로 할지 **일관된 규칙을 코드 주석에 명시**해 줄 것.

   * 추천 규칙: frontmatter에 `category`를 명시하고, 그 값을 slug로 사용.

### 3-2. `src/pages/Home.jsx` 수정

1. 현재 Home.jsx에서 카테고리 카드는 아마 이런 식으로 되어 있을 가능성이 크다:

   * 카테고리 배열 + 하드코딩된 `count: 3` 같은 필드.
2. 이 부분을 **`getCategoryCounts()`를 사용하여 동적으로 카운트를 가져오는 구조**로 변경해 달라.
3. `eae-blueprint` 카테고리도 포함되도록 다음을 보장:

   * slug: `eae-blueprint`
   * label: `EAE Blueprint` (이모지는 지금처럼 유지해도 좋음)
4. MDX 파일이 추가될 때마다, **빌드 후 자동으로 카운트 뱃지가 최신 값**을 보여주도록 구현.

### 3-3. `src/pages/Category.jsx` 수정

1. `/category/:slug` 라우트에서

   * `slug` 파라미터를 읽어서,
   * 해당 slug에 해당하는 포스트들을 `getPostsByCategory(slug)` 같은 함수로 가져와야 한다.
2. 현재는 **카드 프레임만 나오고 내용이 없는 상태**이므로,

   * 실제 포스트 리스트(타이틀, 날짜, 요약 등)를 렌더링하도록 수정.
3. slug ↔ 카테고리 이름 매핑이 깨져 있지 않은지 확인:

   * 예: slug는 `eae-blueprint`인데, 코드 내부에서 `Eae-Blueprint`처럼 대소문자/하이픈 차이로 필터링이 안 되고 있을 수 있음.
4. 카테고리에 포스트가 하나도 없을 때의 **빈 상태 메시지**도 간단하게 처리해 줄 것. (예: "아직 게시물이 없습니다" 정도)

### 3-4. `src/pages/Archive.jsx` 점검

1. Archive 페이지가 현재 어떤 데이터 소스를 쓰는지 확인.
2. 가능하다면 `utils/posts.js`의 동일한 함수들을 사용하여,

   * 카테고리별 헤더 + 각 카테고리의 포스트 리스트
   * 또는 전체 포스트를 날짜 기준으로 정렬한 하나의 리스트
     중 하나 방식으로 일관되게 보여주도록 개선.

## 4. 스타일/디자인 관련 요구

1. 이미 구현되어 있는 **카드 레이아웃, 여백, 글자 스타일**은 최대한 유지해 달라.
2. 이번 작업의 목적은 **데이터 연결과 자동화**이지, 디자인 변경이 아니다.
3. 새 카테고리 `EAE Blueprint`는 지금처럼 상단에 노출되되, 다른 카테고리와 동일한 스타일로 취급.

## 5. 수락 기준(Acceptance Criteria)

아래 조건이 모두 만족되면 작업 완료로 간주한다.

1. `src/content/eae-blueprint/`에 `.mdx` 파일을 1개 더 추가하고 빌드 후:

   * 홈 `/`의 `EAE Blueprint` 카드 카운트가 +1 증가.
2. `/category/eae-blueprint`에 접속하면:

   * 해당 카테고리의 모든 MDX 포스트가 카드 리스트로 보인다.
3. 기존 카테고리들(`qsketch`, `penon`, `mal`, `patchtech`, `eml`, `phl`)도

   * 카운트가 실제 MDX 개수와 일치하고
   * 카테고리 페이지에서 포스트 카드가 정상적으로 보인다.
4. `npm run build` / `npm run preview`가 오류 없이 통과한다.

## 6. 추가 메모

* 가능하면 `src/utils/posts.js` 상단에 **간단한 주석**으로

  * "이 파일은 MDX 포스트를 읽어와 카테고리/포스트 데이터를 제공하는 단일 진실 소스(single source of truth)"라는 설명을 남겨 달라.
* 앞으로 새로운 카테고리를 추가할 때는,

  * `src/content/<new-category>/xxx.mdx` 폴더 생성 + frontmatter에 `category: "<new-category>"`만 넣으면
  * 홈/카테고리/아카이브에 자동 반영되는 구조가 되도록 만들어 달라.
